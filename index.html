<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flipbook eBook – 1 Page Fit</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/src/Style/stPageFlip.css" />
  <style>
    html,body{ height:100%; margin:0; background:#f6f7fb; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans",sans-serif; }

    .wrap{ min-height:100svh; display:flex; flex-direction:column; }

    /* Tombol navigasi mengambang */
    .controls{
      position:fixed; bottom:16px; left:50%; transform:translateX(-50%);
      display:flex; align-items:center; gap:8px;
      padding:6px 12px;
      background:rgba(255,255,255,0.92);
      border-radius:999px;
      box-shadow:0 4px 14px rgba(0,0,0,.12);
      z-index:10;
    }
    .btn{
      appearance:none; border:none; border-radius:999px; padding:8px 12px;
      background:#111827; color:#fff; cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,.08); font-size:14px;
    }
    .btn.ghost{ background:#fff; color:#111; border:1px solid #e5e7eb; }
    .meta{ font-size:13px; color:#555; margin:0 6px; }

    .stage{ flex:1; display:flex; align-items:center; justify-content:center; overflow:hidden; min-height:100svh; }
    #book{ width:100%; height:100%; max-width:1800px; min-width:280px; min-height:360px; }

    .stf__wrapper{ filter: drop-shadow(0 10px 25px rgba(0,0,0,.08)); background:#fff; border-radius:8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="controls" id="toolbar">
      <button id="first" class="btn ghost" title="Halaman pertama">⏮</button>
      <button id="prev"  class="btn"       title="Sebelumnya">◀︎</button>
      <span class="meta">Halaman <b id="cur">1</b>/<b id="tot">—</b></span>
      <button id="next"  class="btn"       title="Berikutnya">▶︎</button>
      <button id="last"  class="btn ghost" title="Halaman terakhir">⏭</button>
    </div>

    <div class="stage"><div id="book"></div></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/page-flip.browser.js"></script>
  <script>
    const PAGE_W=680, PAGE_H=961;
    const RATIO=PAGE_H/PAGE_W;
    const SAFE_MARGIN=16;

    const flip=new St.PageFlip(document.getElementById('book'),{
      width:PAGE_W,height:PAGE_H,size:'stretch',autoSize:true,
      minWidth:280,minHeight:360,maxWidth:2000,maxHeight:2800,
      showCover:true,usePortrait:true,mobileScrollSupport:true,
      drawShadow:true,maxShadowOpacity:0.2,flippingTime:600,startPage:0
    });

    const pages=[
      'pages/03 - Muslim itu Menyerah-01.png','pages/03 - Muslim itu Menyerah-02.png','pages/03 - Muslim itu Menyerah-03.png','pages/03 - Muslim itu Menyerah-04.png','pages/03 - Muslim itu Menyerah-05.png','pages/03 - Muslim itu Menyerah-06.png','pages/03 - Muslim itu Menyerah-07.png','pages/03 - Muslim itu Menyerah-08.png','pages/03 - Muslim itu Menyerah-09.png','pages/03 - Muslim itu Menyerah-10.png','pages/03 - Muslim itu Menyerah-11.png','pages/03 - Muslim itu Menyerah-12.png','pages/03 - Muslim itu Menyerah-13.png','pages/03 - Muslim itu Menyerah-14.png','pages/03 - Muslim itu Menyerah-15.png','pages/03 - Muslim itu Menyerah-16.png','pages/03 - Muslim itu Menyerah-17.png','pages/03 - Muslim itu Menyerah-18.png','pages/03 - Muslim itu Menyerah-19.png','pages/03 - Muslim itu Menyerah-20.png','pages/03 - Muslim itu Menyerah-21.png','pages/03 - Muslim itu Menyerah-22.png','pages/03 - Muslim itu Menyerah-23.png','pages/03 - Muslim itu Menyerah-24.png','pages/03 - Muslim itu Menyerah-25.png','pages/03 - Muslim itu Menyerah-26.png'
    ];
    flip.loadFromImages(pages);

    const $cur=document.getElementById('cur'),$tot=document.getElementById('tot');
    flip.on('init',e=>{$tot.textContent=flip.getPageCount();$cur.textContent=(e.data.page+1);scheduleLayout();});
    flip.on('flip',e=>{$cur.textContent=(e.data+1);});

    document.getElementById('first').onclick=()=>flip.flip(0);
    document.getElementById('prev').onclick =()=>flip.flipPrev();
    document.getElementById('next').onclick =()=>flip.flipNext();
    document.getElementById('last').onclick =()=>flip.flip(flip.getPageCount()-1);

    function doLayout(){
      const stageEl=document.querySelector('.stage');
      const padX=parseFloat(getComputedStyle(stageEl).paddingLeft)+parseFloat(getComputedStyle(stageEl).paddingRight);
      const usableW=Math.max(320,stageEl.clientWidth-padX)-SAFE_MARGIN;
      const usableH=Math.max(320,window.innerHeight-80)-SAFE_MARGIN;
      let targetW=Math.min(usableW,usableH/RATIO);
      let targetH=targetW*RATIO;
      const book=document.getElementById('book');
      book.style.width=Math.max(280,Math.floor(targetW))+'px';
      book.style.height=Math.max(360,Math.floor(targetH))+'px';
      try{flip.update();}catch(e){}
    }
    let timer;
    function scheduleLayout(){clearTimeout(timer);timer=setTimeout(doLayout,60);}
    window.addEventListener('load',()=>setTimeout(scheduleLayout,60));
    window.addEventListener('resize',scheduleLayout);
    window.addEventListener('orientationchange',scheduleLayout);
  </script>
</body>
</html>
